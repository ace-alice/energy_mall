
/**
 * 由 flying services 提供技术支持
 * Powered by Hector
 */
  
var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,s=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r;import{v as l}from"./videojs-BlQj182J.js";import{O as n,H as p,L as c,$ as d,a0 as u,a1 as v,b7 as y,a9 as m,a2 as g,R as f}from"./vendor-kx7r3U2-.js";import{_ as h}from"./index-1kZVT1Y0.js";const P=["id"],b=["src"],j=n({name:"VideoPlayer"});const O=h(n(a(((e,a)=>{for(var t in a||(a={}))o.call(a,t)&&s(e,t,a[t]);if(r)for(var t of r(a))i.call(a,t)&&s(e,t,a[t]);return e})({},j),t({props:{id:{type:String,default:"vd"},src:{type:String,default:""},poster:{type:String,default:""}},emits:["videoCanplaythrough","videoPlay","videoPlaying","videoPause"],setup(e,{emit:a}){const t=p("myPlayerId"),r=p(!1),o=p(!1),i=e,s=a;let n;return c((()=>i.id),(e=>{t.value=e}),{immediate:!0}),d((()=>{try{n=l(t.value,{html5:{hls:{overrideNative:r},nativeVideoTracks:!r,nativeAudioTracks:!r,nativeTextTracks:!r},autoplay:!0,muted:!1,loop:!1,controls:!0,preload:"auto",fluid:!0,type:"application/x-mpegURl",notSupportedMessage:"此视频暂无法播放，请稍后再试",textTrackDisplay:!1},(()=>{n.pause(),o.value=!1,n.on("canplaythrough",(function(e){var a;s("videoCanplaythrough",null==(a=e.target.player.cache_)?void 0:a.duration)})),n.on("play",(function(){s("videoPlay")})),n.on("playing",(function(){const e=n.el().getElementsByTagName("video")[0];e&&e.removeAttribute("poster"),o.value=!0,s("videoPlaying")})),n.on("pause",(function(e){var a;o.value=!1,s("videoPause",null==(a=e.target.player.cache_)?void 0:a.currentTime)}))}))}catch(e){}})),u((()=>{n&&n.dispose()})),(a,r)=>(f(),v("div",y(a.$attrs,{class:"videoPlayer"}),[m("video",{class:"video-js",id:t.value,style:{width:"100%",height:"100%"}},[e.src?(f(),v("source",{key:0,src:e.src},null,8,b)):g("",!0)],8,P)],16))}}))),[["__scopeId","data-v-950c8e6c"]]);export{O as _};
