
/**
 * 由 flying services 提供技术支持
 * Powered by Hector
 */
  
var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,n=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&i(e,l,a[l]);if(s)for(var l of s(a))o.call(a,l)&&i(e,l,a[l]);return e},d=(e,s)=>a(e,l(s));import{O as c,H as r,a1 as u,R as p,a9 as v,S as m,ar as f,as as y,T as b,ac as g,aJ as h,aK as w,aB as x,Y as k,$ as _,K as P,L as j,af as O,aL as U,aM as V,a3 as z,aN as C,ap as B,aO as D,aa as F,aP as I,aQ as S,aD as T,F as L,aR as A,aS as K,Q as N,aT as Q}from"./vendor-kx7r3U2-.js";import{_ as R}from"./index-BqpPi2bc.js";import{_ as $,u as E,d as G}from"./index-1kZVT1Y0.js";const H={class:"normal-card"},J={class:"flex-between"},M={style:{"flex-grow":"1",display:"flex","flex-direction":"column","justify-content":"center","padding-left":"12px"}},Y={style:{display:"flex","justify-content":"space-between","margin-top":"12px"}},q={style:{color:"#d95555","font-size":"18px"}},W={class:"flex-between"},X=c({name:"GoodsCount"}),Z=$(c(d(n({},X),{props:["item","isPoint"],setup(e){const a="USDT",l=r(1);return(s,t)=>{const o=f,i=h,n=w,d=R;return p(),u("div",H,[v("div",J,[m(o,{width:"60",height:"60","lazy-load":"",src:e.item.good_img},null,8,["src"]),v("div",M,[v("div",null,y(e.item.title),1),v("div",Y,[v("div",q,y(e.isPoint?"积分":b(a))+" "+y(e.item.price),1),m(i,{modelValue:b(l),"onUpdate:modelValue":t[0]||(t[0]=e=>g(l)?l.value=e:null),disabled:""},null,8,["modelValue"])])])]),m(n),v("div",W,[t[1]||(t[1]=v("div",null,"合计",-1)),v("div",null,[x(y(e.isPoint?" 积分":b(a))+" ",1),m(d,{"end-val":e.item.price*b(l)},null,8,["end-val"])])])])}}})),[["__scopeId","data-v-911b2def"]]),ee={class:"content"},ae={class:"normal-card",style:{padding:"0"}},le={class:"submitBox"},se={class:"total"},te={style:{"font-size":"12px"}},oe=c({name:"NormalPayAction"}),ie=$(c(d(n({},oe),{props:["items","isPoint"],emits:["callBack"],setup(e,{emit:a}){const l=e,s=a,t=r(!1),o=r(!1),i=r(!1),{addressList:n,userInfo:d}=k(E()),{getAddressList:c}=E(),{getUserInfo:f,getUserDetail:h}=E(),w=r("");_((()=>{c()}));const $=r(0),H=P((()=>l.items.reduce(((e,a)=>e+(+a.price||0)),0)));function J(){$.value?(t.value=!1,i.value=!0,o.value=!0):L({type:"fail",message:"请先选择收货地址"})}function M(){L({type:"loading",overlay:!0});const e=l.items.map((e=>e.id)).join(",");G({ids:e,pin:w.value}).then((a=>{A(),f(),h(),L({type:"text",message:"购买成功，请到订单页查看详情"}),s("callBack",e.split(","))})).finally((()=>{setTimeout((()=>{Y()}),200)}))}function Y(){w.value="",i.value=!1,o.value=!1}return j((()=>n.value),(e=>{if(e.length>0){const a=e.find((e=>e.default));$.value=a?a.id:e[0].id}}),{immediate:!0}),(a,l)=>{const s=Q,d=D,c=C,r=Z,f=R,h=V,k=I,_=S,P=K("waves");return p(),u(O,null,[v("div",{onClick:l[0]||(l[0]=e=>t.value=!0)},[U(a.$slots,"btn",{},void 0)]),m(h,{show:b(t),"onUpdate:show":l[2]||(l[2]=e=>g(t)?t.value=e:null),title:" ",teleport:"#app","lazy-render":"","close-on-click-overlay":!1},{default:z((()=>[v("div",ee,[m(c,{modelValue:b($),"onUpdate:modelValue":l[1]||(l[1]=e=>g($)?$.value=e:null)},{default:z((()=>[v("div",ae,[(p(!0),u(O,null,B(b(n),(e=>(p(),N(d,{key:e.id,clickable:"",title:"".concat(e.address_name," ").concat(e.address_phone),label:"".concat(e.address_city,",").concat(e.address_place),onClick:a=>$.value=e.id},{icon:z((()=>[m(s,{style:{"margin-right":"12px"},"checked-color":"#000",name:e.id},null,8,["name"])])),_:2},1032,["title","label","onClick"])))),128)),m(d,{title:"添加收货地址",icon:"add-o",size:"large",clickable:"",to:"/address/add"})])])),_:1},8,["modelValue"]),(p(!0),u(O,null,B(e.items,(a=>(p(),N(r,{item:a,isPoint:e.isPoint},null,8,["item","isPoint"])))),256)),v("div",le,[v("div",se,[l[6]||(l[6]=v("span",{style:{"font-size":"14px"}},"合计",-1)),v("span",te,y(e.isPoint?"积分":b("USDT")),1),m(f,{style:{"font-size":"18px",color:"#ff3434","font-weight":"600"},"end-val":b(H)},null,8,["end-val"])]),F((p(),u("div",{class:"submit",onClick:J},l[7]||(l[7]=[x("提交订单")]))),[[P]])])])])),_:1},8,["show"]),m(h,{show:b(i),"onUpdate:show":l[5]||(l[5]=e=>g(i)?i.value=e:null),teleport:"#app","lazy-render":"","close-on-click-overlay":!1,closeable:!1},{default:z((()=>[v("div",{class:"content",style:T([{height:"400px"},{"--van-password-input-background":"#F7F8FB"}])},[v("div",{class:"title"},[v("div",{onClick:Y},"取消"),l[8]||(l[8]=v("div",null,"请输入支付密码",-1)),v("div",{onClick:M},"确定")]),m(k,{value:b(w),focused:b(o),gutter:10,onFocus:l[3]||(l[3]=e=>o.value=!0),info:"密码为 6 位数字",mask:!0},null,8,["value","focused"]),m(_,{modelValue:b(w),"onUpdate:modelValue":l[4]||(l[4]=e=>g(w)?w.value=e:null),maxlength:"6",show:b(o)},null,8,["modelValue","show"])])])),_:1},8,["show"])],64)}}})),[["__scopeId","data-v-f89a99b1"]]);export{ie as _};
