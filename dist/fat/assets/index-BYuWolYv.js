
/**
 * 由 flying services 提供技术支持
 * Powered by Hector
 */
  
var t=Object.defineProperty,e=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(e,a,o)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o;import{Y as r,H as i,K as u,$ as c,O as d,a1 as p,S as f,a9 as b,a3 as g,T as m,bl as y,aG as v,ac as h,b2 as k,U as w,aB as x,as as _,at as j,R as C}from"./vendor-kx7r3U2-.js";import{_ as O}from"./index-DubjrKl5.js";import{_ as I}from"./index-C_qy4oKs.js";import{u as S,h as z,t as L,$ as P,a0 as T,_ as D}from"./index-1kZVT1Y0.js";import"./buffer-BJ2qglEo.js";import"./back_white_icon-8wmrRgZw.js";const E={class:"normal-page lottery-bg"},U={class:"wheel-box"},H={class:"normal-card draw-rule-card"},A=["innerHTML"],B={class:"bottom-btn"},G={class:"signin-pop"},M={class:"signin-text"},W=d({name:"Lottery"});const $=D(d(e(((t,e)=>{for(var a in e||(e={}))s.call(e,a)&&l(t,a,e[a]);if(o)for(var a of o(e))n.call(e,a)&&l(t,a,e[a]);return t})({},W),a({setup(t){const{myLucky:e,defaultConfig:a,buttons:o,defaultStyle:s,blocks:n,startCallback:l,endCallback:d,content:D,prizes:W,winInfo:$,showPopup:K,userInfo:R,loading:Y}=function(){const{userDetail:t,userInfo:e}=r(S()),{getUserDetail:a,getUserInfo:o}=S(),s=i({content:""}),n=i([]),l=u((()=>z(s.value.content).replace(/<img/g,'<img  width="100%"'))),d=u((()=>n.value.map((t=>({fonts:[{text:t.title,top:"10%",fontSize:"14px"}],background:"#fff",imgs:[{src:t.img,width:"20px",height:"20px",top:"30px"}]})))));c((()=>{L({code:"lottory_details_info"}).then((t=>{s.value=t.data.data})),P().then((t=>{n.value=t.data.data}))}));const p=i(),f=i({gutter:6}),b=i({fontColor:"#3EA867",fontSize:"24px",fontWeight:600}),g=i([{padding:"6px",background:"#3EA867"}]),m=i([{imgs:[{src:"/assets/draw_btn-Bxrp6Ghw.png",width:"120px",height:"120px",top:"-60px"}]}]),y=i(!1),v=i({}),h=i(!1),k=i(!1);return{myLucky:p,defaultConfig:f,buttons:m,defaultStyle:b,blocks:g,startCallback:function(t){y.value||k.value||(k.value=!0,T({}).then((t=>{p.value.play(),y.value=!0,a(),o(),setTimeout((()=>{const e=n.value.findIndex((e=>e.id==t.data.data.id))||0;v.value=n.value[e],p.value.stop(e),y.value=!1}),1500),setTimeout((()=>{h.value=!0}),2500)})).catch((()=>{p.value.stop(0),y.value=!1})).finally((()=>{k.value=!1})))},endCallback:function(t){},content:l,prizes:d,userDetail:t,winInfo:v,showPopup:h,userInfo:e,loading:k}}();return(t,r)=>{const i=w,u=I,c=y("LuckyWheel"),S=O,z=v,L=j,P=k;return C(),p("div",E,[f(u,{background:!1,"back-icon-tag":2},{right:g((()=>[f(i,{type:"success",size:"small",to:"/lottery-history"},{default:g((()=>r[2]||(r[2]=[x("抽奖记录")]))),_:1})])),_:1}),b("div",U,[f(c,{class:"lucky-wheel",ref_key:"myLucky",ref:e,width:"200px",height:"200px",defaultConfig:m(a),defaultStyle:m(s),prizes:m(W),blocks:m(n),buttons:m(o),onEnd:m(d)},null,8,["defaultConfig","defaultStyle","prizes","blocks","buttons","onEnd"])]),b("div",H,[f(S,{title:"抽奖规则"}),b("div",{innerHTML:m(D)},null,8,A)]),f(z,{"offset-bottom":0,position:"bottom"},{default:g((()=>[b("div",B,[f(i,{type:"primary",round:"",block:"",onClick:m(l),loading:m(Y)},{default:g((()=>[x("立即抽奖 ( "+_(m(R).raffle_num)+"次 )",1)])),_:1},8,["onClick","loading"])])])),_:1}),f(P,{show:m(K),"onUpdate:show":r[1]||(r[1]=t=>h(K)?K.value=t:null),"close-on-click-overlay":!1,style:{background:"transparent",width:"360px"}},{default:g((()=>[b("div",G,[b("div",M,[r[3]||(r[3]=x(" 恭喜您获得 ")),b("span",null,_(m($).money||"0")+" "+_(+m($).type?"积分":m("USDT")),1)])]),f(L,{class:"close-icon",size:"40",name:"close",color:"#fff",onClick:r[0]||(r[0]=t=>K.value=!1)})])),_:1},8,["show"])])}}}))),[["__scopeId","data-v-3ce11561"]]);export{$ as default};
